<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Цветовой тест Люшера</title>
        <style type="text/css">
	  table { margin-bottom: 30px; }
          .block {
              width: 150px;
              height: 200px;
              padding: 5px;
              float: left;
              /* border-radius */
              -webkit-border-radius: 5px;
              -moz-border-radius: 5px;
              border-radius: 5px;
              /* box-shadow */
              -webkit-box-shadow: rgba(0,0,0,0.2) 0px 1px 3px;
              -moz-box-shadow: rgba(0,0,0,0.2) 0px 1px 3px;
              box-shadow: rgba(0,0,0,0.2) 0px 1px 3px;
             }

          .block1 {  background: #00008b;  }
          .block2 {  background: #228b22;  }
          .block3 {  background: #ff4040;  }
          .block4 {  background: #ffd700;  }
          .block5 {  background: #8b668b;  }
          .block6 {  background: #8b4513;  }
          .block7 {  background: #1c1c1c;  }
          .block0 {  background: #8b8878;  }

          .choices { }
          .description { font-style: italic; margin-bottom: 10px; margin-left: 20px; }
	  .instruction { font-family: "Times New Roman"; font-style: italic; font-size: 120%; text-align: center; }
        </style>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
          $(document).ready(function() {
              var x = [];
              var so = 0;
              var vk = 0;
              var numRx = /block(\d)/;
              var so_interpretacia = ["Отсутствие непродуктивной нервно-психической напряженности. Испытуемый активен, его действия разнообразны, коэффициент полезного действия высокий. Эмоциональный настрой - оптимистичный. Развит волевой самоконтроль. При этом воля не является орудием подавления какой-то части личности, она лишь согласует различные, но не противоречивые желания испытуемого. При наличии соответствующей мотивации испытуемый способен интенсивно работать длительное время. В экстремальных ситуациях он эффективно мобилизуется и сосредотачивается на выполнении задачи", "Незначительный уровень непродуктивной нервно-психической напряженности. У испытуемого преобладает установка на активную деятельность. Его энергоресурсов достаточно для более менее регулярных вспышек сверхактивности и напряжения, недоступных большинству других людей. В условиях мотивированной (интересной) деятельности не испытывает трудностей с оперативным и долговременным запоминанием и воспроизведением информации. К острым ощущениям, в общем, не стремится. Из стрессовых ситуаций выходит с достоинством.", "Средний уровень непродуктивной нервно-психической напряженности. Испытуемый справляется со своими обязанностями в пределах средних сложившихся требований. В привычной обстановке он переходит от работы к отдыху и обратно, от одного вида деятельности к другому без существенных затруднений. В случае необходимости способен преодолевать усталость волевым усилием, однако после этоого в его делах и самочувствии просматривается длинный ''шлейф'' сниженной работоспособности. Для сохранения здоровья и работоспособности испытуемому требуется относительно четкое и субъективное разделение времени работы и отдыха.", "Повышенный уровень непродуктивной нервно-психической напряженности. Потенциал целесообразной активности испытуемого очень невысок. По этой причине он вынужден насильно заставлять себя делать те или иные неободимые дела. Постоянно действующий волевой контроль усиливает переутомление. Длительная интенсивная работа скорее всего будет дорого стоить испытуемому в нервно-психическом плане. При этом она будет очень неравноценной по производительноси и качеству в разные периоды времени Общий эмоциональный фон характеризуется повышенной возбудимомстью, тревожностью, неуверенностью. В стрессовой ситуации вероятен срыв деятельности и поведения.", "Выраженная непродуктивная нервно-психическая напряженность. Испытуемый повышенно утомляем. Его внимание легко отвлекается посторонними вещами, при этом арактерно ''застревание'' на эмоциональных переживаниях. Отсутствие устойчивой иерархии мотивов делает испытуемого реактивным и нецеленаправленным. Настроение в кратчайшее время может колебаться между экзальтацией и подавленностью, возбуждением и бессилием. В эмоциональном состоянии преобладают тревога, предчувствие неприятностей, бессилие и отсутствие желания что-либо делать. В экстремальной ситуации испытуемый ненадежен."];
              var vk_interpretacia = ["Истощенность, установка на бездействие. Хроническое переутомление. Характерно пассивное реагирование на трудности, неготовность к напряжению и адекватным действиям в стрессовых ситуациях. Необходимы разноплановые и объемные восстановительные мероприятия.", "Установка на оптимизацию расходования сил. Умеренная потребность в восстановлении и отдыхе. Энергетический потенциал невысок, но вполне достаточен для успешной деятельности в привычных спокойных условиях. В экстремальной ситуации вероятно запаздывание ориентировки и принятия решений.", "Оптимальная мобилизация физических и психических ресурсов, установка на активное действие. В экстремальной ситуации наиболее вероятна высокая скорость ориентровки и принятия решений, целесообразность и успешность действий.", "Избыточное возбуждение, суетливость. Уровень возбуждения избыточно высок. Нередки случаи, когда испытуемый что-либо делает не ради самого дела, а лишь для того, чтобы разрядиться. В сложных ситуациях легко формируются лихорадочные реакции: импульсивность, нетерпеливость, снижение самоконтроля, необдуманные поступки. В экстремальных ситуациях наиболее вероятна низкая эффективность действий, панические реакции. Необходимы разноплановые релаксирующие и успокаивающие процедуры."];
              var autnorma = [3, 4, 2, 5, 1, 6, 0, 7]; //красн(3),желт(4),зелен(2),фиолет(5),син(1),коричн(6),сер(0),черн(7)
	      var instructionString = ["Нажмите на тот цвет, который вам нравится больше всего","Какой из оставшихся цветов вам нравится больше всего?"];

              $('.block').click(function() {
                  $(this).hide(function() {
                      x.push(parseInt(numRx.exec($(this).attr('class'))[1]));
                      if (x.length == 1) {
                          $('p.instruction').remove();
			  $("div.instruction").append("<p class=\"instruction\">"+instructionString[1]+"</p>");
                      }
                      if (x.length == 8) {
                          showchoices();
                      }
                  });
              });

              $('#toggle1').click(function() {
                  $('.block').show();
                  x = [];
                  $('p.choices').remove();
		  $('p.instruction').remove();
		  $("div.instruction").append("<p class=\"instruction\">"+instructionString[0]+"</p>");
              });

              function showchoices() {
		  $('p.instruction').remove();
                  so = 0;
                  vk = 0;
                  var so_string = "Описание";
                  var vk_string = "Описание";
                  var i;

                  for (i = 0; i < x.length; i++) {
                      so += Math.abs(autnorma.indexOf(i) - x.indexOf(i));
                  }
                  vk = (18 - x.indexOf(3) - x.indexOf(4) - 2) / (18 - x.indexOf(1) - x.indexOf(2) - 2);
                  vk = Math.round(vk * 10) / 10;

                  if (so <= 6) {
                      so_string = so_interpretacia[0];
                  }
                  else if (so <= 12) {
                      so_string = so_interpretacia[1];
                  }
                  else if (so <= 20) {
                      so_string = so_interpretacia[2];
                  }
                  else if (so <= 26) {
                      so_string = so_interpretacia[3];
                  }
                  else if (so <= 32) {
                      so_string = so_interpretacia[4];
                  }

                  if (vk <= 0.4) {
                      vk_string = vk_interpretacia[0];
                  }
                  else if (vk <= 0.8) {
                      vk_string = vk_interpretacia[1];
                  }
                  else if (vk <= 1.9) {
                      vk_string = vk_interpretacia[2];
                  }
                  else if (vk <= 5) {
                      vk_string = vk_interpretacia[3];
                  }

                  $("div.choices").append("<p class=\"choices\">Цветовые выборы: " + x.join("-") + "</p>");
                  $("div.choices").append("<p class=\"choices\">Суммарное отклонение (СО): " + so + "</p>");
                  $("div.choices").append("<p class=\"choices description\">   " + so_string + "</p>");
                  $("div.choices").append("<p class=\"choices\">Вегетативный коэффициент (ВК): " + vk + "</p>");
                  $("div.choices").append("<p class=\"choices description\">   " + vk_string + "</p>");
              }
          });
        </script>
    </head>
    <body>
	<div class="choices"></div>
	<div align="center">
	   <div class="instruction"><p class="instruction">Нажмите на тот цвет, который вам нравится больше всего</p></div>
           <table>
            <tr>
                <td><div class="block1 block"></div></td>
                <td><div class="block2 block"></div></td>
                <td><div class="block3 block"></div></td>
                <td><div class="block4 block"></div></td>
            </tr>
            <tr>
                <td><div class="block5 block"></div></td>
                <td><div class="block6 block"></div></td>
                <td><div class="block7 block"></div></td>
                <td><div class="block0 block"></div></td>
            </tr>
           </table>
           <input type="submit" name="toggle1" value="Начать сначала!" id="toggle1" />
	</div>
    </body>
</html>
